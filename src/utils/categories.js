// 分野ごとの設定（名前、説明、色、サブカテゴリ）
// 統計検定準1級の公式範囲表(2018)に基づいて詳細化・網羅
export const CATEGORY_CONFIG = {
    '確率と分布': {
        description: '確率変数、各種確率分布、極限定理、変数変換など',
        color: 'text-blue-400',
        bg: 'bg-blue-500/10',
        border: 'border-blue-500/30',
        subcategories: [
            // 事象と確率
            '条件付き確率・ベイズの定理', '統計的独立', '包除原理',
            // 確率分布と母関数
            '確率密度関数・累積分布関数', '同時確率分布・周辺確率分布', '条件付き分布', 
            '積率母関数(モーメント母関数)', '確率母関数',
            // 確率と確率変数
            '期待値・分散・共分散', '相関係数・偏相関係数', '変数変換', '確率変数の線形結合',
            '条件付き期待値・分散', '分位点関数', '歪度・尖度・変動係数',
            // 極限定理
            '大数の法則', '中心極限定理', 'チェビシェフの不等式', '確率収束・分布収束',
            '極値分布', '二項分布の正規近似', 'ポアソン分布の正規近似', '連続修正', 'デルタ法',
            // 離散型分布
            '離散一様分布', 'ベルヌーイ分布', '二項分布', '超幾何分布', 
            'ポアソン分布', '幾何分布', '負の二項分布', '多項分布',
            // 連続型分布
            '連続一様分布', '正規分布', '指数分布', 'ガンマ分布', 'ベータ分布', 
            'コーシー分布', '対数正規分布', '多変量正規分布',
            // 標本分布
            'カイ二乗分布', 't分布', 'F分布', '非心分布'
        ]
    },
    '統計的推測': {
        description: '点推定、区間推定、仮説検定、検出力、ノンパラメトリック法など',
        color: 'text-green-400',
        bg: 'bg-green-500/10',
        border: 'border-green-500/30',
        subcategories: [
            // 推定
            '点推定(不偏性・一致性・有効性)', '十分統計量', 'ネイマンの分解定理', '順序統計量',
            '最尤法', 'モーメント法', '最小二乗法', 
            'ガウス・マルコフの定理', 'クラーメル・ラオの不等式', 'フィッシャー情報量', 
            '最尤推定量の漸近正規性', 
            '区間推定(母平均・母分散・母比率)', '被覆確率', '片側信頼限界',
            // 検定
            '第一種・第二種の過誤', '検出力(検定力)', '検出力曲線', 'サンプルサイズの決定',
            '多重比較', 'ネイマン・ピアソンの基本定理', '尤度比検定', 
            'ワルド型検定', 'スコア検定', '正確検定',
            '母平均・母分散の検定', '2標本問題の検定', '適合度検定', '独立性の検定',
            // ノンパラメトリック
            'ウィルコクソンの順位和検定', '並べ替え検定', '符号付き順位検定', 
            'クラスカル・ウォリス検定', '順位相関係数'
        ]
    },
    '多変量解析': {
        description: '主成分、判別、因子、クラスター、共分散構造など',
        color: 'text-purple-400',
        bg: 'bg-purple-500/10',
        border: 'border-purple-500/30',
        subcategories: [
            '主成分分析(主成分スコア・負荷量)', '寄与率・累積寄与率',
            '判別分析(フィッシャー線形判別)', '2次判別', '正準判別',
            'サポートベクターマシン(SVM)', 'ROC曲線・AUC', '混同行列',
            '階層型クラスター分析(デンドログラム)', '非階層型クラスター分析(k-means法)', '距離行列',
            '因子分析(探索的・確認的)', '因子の回転', 
            '共分散構造分析(パス解析・因果図)', 
            '正準相関分析', '多次元尺度構成法(MDS)', '対応分析', '数量化法'
        ]
    },
    '回帰・線形モデル': {
        description: '重回帰、ロジスティック回帰、GLM、正則化など',
        color: 'text-orange-400',
        bg: 'bg-orange-500/10',
        border: 'border-orange-500/30',
        subcategories: [
            '単回帰分析', '重回帰分析', '偏回帰係数', '決定係数・自由度修正済み決定係数',
            '多重共線性', '変数選択(AIC・BIC)', '残差分析', 
            '一般化最小二乗推定', 'L1正則化(Lasso)', 'L2正則化(Ridge)',
            '回帰診断(はずれ値・leverage・Q-Qプロット)', '系列相関・DW比',
            'ロジスティック回帰', 'プロビット分析',
            '一般化線形モデル(GLM)', '比例ハザードモデル', '生存時間解析'
        ]
    },
    '実験計画・分散分析': {
        description: 'ANOVA、実験計画法、ブロック化、直交表など',
        color: 'text-yellow-400',
        bg: 'bg-yellow-500/10',
        border: 'border-yellow-500/30',
        subcategories: [
            '一元配置分散分析', '二元配置分散分析', '交互作用', '分散分析表',
            'フィッシャーの3原則(無作為化・反復・局所管理)', 
            '乱塊法', 'ブロック化',
            '直交配列(直交表)', '一部実施要因計画'
        ]
    },
    '時系列・確率過程': {
        description: 'ARMA、状態空間モデル、マルコフ連鎖、ブラウン運動など',
        color: 'text-cyan-400',
        bg: 'bg-cyan-500/10',
        border: 'border-cyan-500/30',
        subcategories: [
            '自己相関・偏自己相関', 'ペリオドグラム',
            '定常性とホワイトノイズ', '階差',
            'ARモデル・MAモデル・ARMAモデル', 'ARIMAモデル',
            '状態空間モデル(カルマンフィルタ)',
            'マルコフ連鎖(推移確率・既約性・再帰性)', '定常分布',
            'ポアソン過程', 'ブラウン運動(ウィーナー過程)', 'ランダムウォーク'
        ]
    },
    '標本・分割表・モデル': {
        description: '標本調査、分割表、欠測値処理、モデル選択など',
        color: 'text-indigo-400',
        bg: 'bg-indigo-500/10',
        border: 'border-indigo-500/30',
        subcategories: [
            '有限母集団修正', '単純無作為抽出', '層化抽出法', 'クラスター抽出法', '多段抽出法',
            '分割表の解析(オッズ比・連関係数)', 'ファイ係数',
            '対数線形モデル', '階層モデル', '条件付き独立性', 'グラフィカルモデリング',
            '欠測メカニズム(MCAR/MAR/MNAR)', 'EMアルゴリズム',
            'モデル選択基準(AIC・BIC)', '交差検証(Cross Validation)'
        ]
    },
    'ベイズ・シミュレーション': {
        description: 'ベイズ推定、MCMC、モンテカルロ法、ブートストラップなど',
        color: 'text-rose-400',
        bg: 'bg-rose-500/10',
        border: 'border-rose-500/30',
        subcategories: [
            'ベイズの定理', '事前分布・事後分布', '共役事前分布', 
            'ベイズ推定(点推定・区間推定)', '階層ベイズモデル', 
            'モンテカルロ法', 'マルコフ連鎖モンテカルロ法(MCMC)', 
            'ギブスサンプリング', 'メトロポリス・ヘイスティングス法',
            'ブートストラップ法', 'ジャックナイフ法', '棄却法', '乱数シミュレーション'
        ]
    }
};

export const CATEGORY_NAMES = Object.keys(CATEGORY_CONFIG);

// 統計検定準1級 頻出分野リスト（整理・拡充版）
// ※ランクマッチでのAI出題指示に使用
export const IMPORTANT_TOPICS = [
    // 確率・分布
    '多変量正規分布', '条件付き分布', '積率母関数(モーメント母関数)', 'ポアソン分布', '変数変換',
    // 推測
    '最尤法', '尤度比検定', '適合度検定', 'ウィルコクソンの順位和検定', '十分統計量', 'デルタ法',
    // 多変量
    '主成分分析', '判別分析', '因子分析', 'クラスター分析', 'サポートベクターマシン(SVM)',
    // 線形モデル
    '重回帰分析', 'ロジスティック回帰', '一般化線形モデル(GLM)', '比例ハザードモデル', '生存時間解析',
    // 実験・分散
    '分散分析表', '交互作用', '実験計画法',
    // 時系列
    '時系列解析', 'マルコフ連鎖', 'ポアソン過程', 'ブラウン運動', '状態空間モデル',
    // 標本・分割表
    '標本調査法', '分割表の解析', 'グラフィカルモデリング', 'EMアルゴリズム',
    // ベイズ・シミュレーション
    'ベイズ推定', 'MCMC(マルコフ連鎖モンテカルロ法)', 'ブートストラップ法'
];

/**
 * トピック名から、それが属するメインカテゴリー名を検索して返す関数
 * @param {string} topic 
 * @returns {string} カテゴリー名 (見つからない場合は '実験・その他' ではなくランダムに返すか、一番近いものを返す)
 */
export function getCategoryByTopic(topic) {
    for (const [categoryName, config] of Object.entries(CATEGORY_CONFIG)) {
        // 完全一致または部分一致で検索
        if (config.subcategories.some(sub => sub === topic || sub.includes(topic) || topic.includes(sub))) {
            return categoryName;
        }
    }
    // 見つからない場合のフォールバック（デフォルトカテゴリ）
    return '確率と分布'; 
}